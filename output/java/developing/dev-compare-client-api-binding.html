<!DOCTYPE html>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link type="text/css" rel="stylesheet" href="/resources/site.css" />
    <script src="/resources/space.js" type="text/javascript"></script>
    <meta name="keywords" content="CMIS, Content Management Interoperability Service, ECM, Enterprise Content Management, OASIS, integration standards, Chemistry, OpenCMIS, cmislib, DotCMIS, PortCMIS, ObjectiveCMIS" />
    <meta name="description" content="Apache Chemistry, CMIS Implementation" />
    <link rel="shortcut icon" href="/favicon.ico">
    <title>Apache Chemistry - Compare client binding with client API</title>
    <style>
.headerlink {
    visibility: hidden;
}
dt:hover > .headerlink, p:hover > .headerlink, td:hover > .headerlink, h1:hover > .headerlink, h2:hover > .headerlink, h3:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, h6:hover > .headerlink {
    visibility: visible;
}
    </style>
  </head>
<body onload="init()">
  <table width="100%" cellpadding="0" cellspacing="0">
    <tr width="100%">
      <td id="cell-0-0">&nbsp;</td>
      <td id="cell-0-1">&nbsp;</td>
      <td id="cell-0-2">&nbsp;</td>
    </tr>
    <tr width="100%">
      <td id="cell-1-0">&nbsp;</td>
      <td id="cell-1-1">
        <div id="banner" style="padding: 0px;">
          <!-- Banner -->
          <A href="https://chemistry.apache.org/" title="Apache Chemistry">
            <IMG src="/images/chemistry_tm_logo.png" style="float:left; border:0px;"/>
          </A>
          <A href="https://www.apache.org/" title="The Apache Software Foundation">
            <IMG src="/images/asf-logo.png"  style="float:right; border:0px;"/>
           </A>
          <!-- Banner -->
        </div>
        <div id="top-menu">
          <table border="0" cellpadding="1" cellspacing="0" width="100%">
            <tr>
              <td>
                <div align="left">
                <!-- Breadcrumbs -->
<a href="/">Home</a>&nbsp;&raquo&nbsp;<a href="/java/">Java</a>&nbsp;&raquo&nbsp;<a href="/java/developing/">Developing</a>&nbsp;&raquo&nbsp;<a href="#">Compare client binding with client API</a>
                <!-- Breadcrumbs -->
                </div>
              </td>
              <td>
                <div align="right">
                <!-- Quicklinks -->
<P>
<A href="https://www.apache.org/" class="external-link" rel="nofollow">Apache</A>
|
<A href="https://www.apache.org/licenses/LICENSE-2.0.html" class="external-link" rel="nofollow">License</A>
</P>
                <!-- Quicklinks -->
                </div>
              </td>
            </tr>
          </table>
        </div>
      </td>
      <td id="cell-1-2">&nbsp;</td>
    </tr>
    <tr width="100%">
      <td id="cell-2-0">&nbsp;</td>
      <td id="cell-2-1">
        <table>
          <tr height="100%" valign="top">
            <td height="100%">
              <div id="wrapper-menu-page-right">
                <div id="wrapper-menu-page-top">
                  <div id="wrapper-menu-page-bottom">
                    <div id="menu-page">
                      <!-- NavigationBar -->

<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
   <LI><A href="/project/cmis.html" title="What's CMIS">What is CMIS?</A></LI>
   <LI><A href="https://www.apache.org/licenses/" class="external-link" rel="nofollow">License</A></LI>
   <LI><A href="/project/community.html" title="Community">Community</A></LI>
   <LI><A href="https://lists.apache.org/list.html?dev@chemistry.apache.org" class="external-link" rel="nofollow">Mailing List</A></LI>
   <LI><A href="https://issues.apache.org/jira/browse/CMIS" class="external-link" rel="nofollow">Issue Tracking</A></LI>
   <LI><A href="https://www.apache.org/security/" class="external-link" rel="nofollow">Security</A></LI>
</UL>


<H3><A name="Navigation-Search"></A>Search</H3>

<DIV style="padding: 0px 0px 0px 20px;">
<FORM action="https://www.google.com/search" method="get" style="font-size: 10px;">
<INPUT name="ie" type="hidden" value="UTF-8"></INPUT>
<INPUT name="oe" type="hidden" value="UTF-8"></INPUT>
  <INPUT maxlength="255" name="q" size="12" type="text" value=""></INPUT>
  <INPUT name="btnG" type="submit" value="Search"></INPUT>
  <INPUT name="domains" type="hidden" value="chemistry.apache.org"></INPUT>
  <INPUT name="sitesearch" type="hidden" value="chemistry.apache.org"></INPUT>
</FORM>
</DIV>


<H3><A name="Navigation-CMISforJava"></A>CMIS for Java</H3>

<UL class="alternate" type="square">
  <LI><A href="/java/opencmis.html" title="OpenCMIS Overview and Index">Overview</A></LI>
  <LI><A href="/java/download.html" title="Downloads">Downloads</A></LI>
  <LI><A href="/docs/cmis-samples/" title="Downloads">Code Samples</A></LI>
  <LI><A href="/java/javadoc">JavaDoc</A></LI>
  <LI><A href="https://svn.apache.org/repos/asf/chemistry/opencmis/trunk/" class="external-link" rel="nofollow">Source Code</A></LI>
</UL>


<H3><A name="Navigation-CMISforPython"></A>CMIS for Python</H3>

<UL class="alternate" type="square">
  <LI><A href="/python/cmislib.html" title="cmislib">cmislib</A></LI>
  <LI><A href="/python/docs/" rel="nofollow">cmislib Documentation</A></LI>
  <LI><A href="https://svn.apache.org/repos/asf/chemistry/cmislib/trunk/" class="external-link" rel="nofollow">Source Code</A></LI>
</UL>


<H3><A name="Navigation-CMISforPHP"></A>CMIS for PHP</H3>

<UL class="alternate" type="square">
  <LI><A href="/php/phpclient.html" title="phpclient">CMIS PHP Client</A></LI>
  <LI><A href="https://svn.apache.org/repos/asf/chemistry/phpclient/trunk/" class="external-link" rel="nofollow">Source Code</A></LI>
</UL>


<H3><A name="Navigation-CMISfor.NET"></A>CMIS for .NET</H3>

<UL class="alternate" type="square">
  <LI><A href="/dotnet/dotcmis.html" title="DotCMIS">DotCMIS</A></LI>
  <LI><A href="https://svn.apache.org/repos/asf/chemistry/dotcmis/trunk/" class="external-link" rel="nofollow">DotCMIS Source Code</A></LI>
  <LI><A href="/dotnet/portcmis.html" title="PortCMIS">PortCMIS</A></LI>
  <LI><A href="https://svn.apache.org/repos/asf/chemistry/portcmis/trunk/" class="external-link" rel="nofollow">PortCMIS Source Code</A></LI>
  <LI><A href="/docs/cmis-samples/" title="Downloads">Code Samples</A></LI>
</UL>


<H3><A name="Navigation-CMISforObjective-C"></A>CMIS for Objective-C</H3>

<UL class="alternate" type="square">
  <LI><A href="/objective-c/objectivecmis.html" title="ObjectiveCMIS">ObjectiveCMIS</A></LI>
  <LI><A href="https://svn.apache.org/repos/asf/chemistry/objectivecmis/trunk/" class="external-link" rel="nofollow">Source Code</A></LI>
</UL>

<H3><A name="Navigation-CMISforJavaScript"></A>CMIS for JavaScript</H3>

<UL class="alternate" type="square">
  <LI><A href="/javascript/parts.html" title="Chemistry Parts">Chemistry Parts</A></LI>
  <LI><A href="https://svn.apache.org/repos/asf/chemistry/parts/trunk/" class="external-link" rel="nofollow">Source Code</A></LI>
</UL>


<H3><A name="Navigation-Sponsorship"></A>Sponsorship</H3>

<UL class="alternate" type="square">
   <LI><A href="https://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">Thanks</A></LI>
   <LI><A href="https://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">Sponsoring Apache</A></LI>
</UL>


<H3><A name="Navigation-Internal"></A>Internal Docs</H3>

<UL class="alternate" type="square">
   <LI><A href="/internal/internal-index.html" rel="nofollow"> Internal Documentation</A></LI>
</UL>
                    <!-- NavigationBar -->
                    </div>
                </div>
              </div>
            </div>
           </td>
           <td height="100%">
             <!-- Content -->
             <div class="wiki-content">    <h1 id="compare-client-binding-with-client-api">Compare client binding with client API<a class="headerlink" href="#compare-client-binding-with-client-api" title="Permalink">&para;</a></h1>
<p><a name="OpenCMISAPIExamples-OpenCMISAPIExamples"></a></p>
<p>Here are two code snippets performing the same operations. The first
snippet uses the client API; the second snippet uses the provider API. As
you can see the provider API is clunkier and more difficult to use but it
gives you access to all CMIS extension points and provides more
fine-grained control.</p>
<p><a name="OpenCMISAPIExamples-ClientAPI"></a></p>
<h2 id="client-api">Client API<a class="headerlink" href="#client-api" title="Permalink">&para;</a></h2>
<p><a href="http://hudson.zones.apache.org/hudson/job/Chemistry%20-%20OpenCMIS%20-%20site/javadoc/org/apache/opencmis/client/api/package-summary.html">Client API JavaDoc</a>.
See also <a href="client/dev-client-api.html">OpenCMIS Client API</a>.</p>
<pre><code>Map&lt;String, String&gt; parameters = new HashMap&lt;String, String&gt;();
parameters.put(SessionParameter.BINDING_TYPE, BindingType.ATOMPUB.value());
parameters.put(SessionParameter.ATOMPUB_URL, "http://localhost:8080/opencmis/atom");
parameters.put(SessionParameter.REPOSITORY_ID, "A1");
parameters.put(SessionParameter.USER, "test");
parameters.put(SessionParameter.PASSWORD, "test");

// create the session
Session session = SessionFactoryImpl.newInstance().createSession(parameters);

// get repository info
RepositoryInfo repInfo = session.getRepositoryInfo();
System.out.println("Repository name: " + repInfo.getName());

// get root folder and its path
Folder rootFolder = session.getRootFolder();
String path = rootFolder.getPath();
System.out.println("Root folder path: " + path);

// list root folder children
ItemIterable&lt;CmisObject&gt; children = rootFolder.getChildren();
for (CmisObject object : children) {
    System.out.println("---------------------------------");
    System.out.println("	Id:              " + object.getId());
    System.out.println("	Name:            " + object.getName());
    System.out.println("	Base Type:       " + object.getBaseTypeId());
    System.out.println("	Property 'bla':  " + object.getPropertyValue("bla"));

    ObjectType type = object.getType();
    System.out.println("	Type Id:          " + type.getId());
    System.out.println("	Type Name:        " + type.getDisplayName());
    System.out.println("	Type Query Name:  " + type.getQueryName());

    AllowableActions actions = object.getAllowableActions();
    System.out.println("	canGetProperties: " + actions.getAllowableActions().contains(Action.CAN_GET_PROPERTIES));
    System.out.println("	canDeleteObject:  " + actions.getAllowableActions().contains(Action.CAN_DELETE_OBJECT));
}

// get an object
ObjectId objectId = session.createObjectId("100");
CmisObject object = session.getObject(objectId);

if (object instanceof Folder) {
    Folder folder = (Folder) object;
    System.out.println("Is root folder: " + folder.isRootFolder());
}

if (object instanceof Document) {
    Document document = (Document) object;
    ContentStream content = document.getContentStream();
    System.out.println("Document MIME type: " + content.getMimeType());
}
</code></pre>
<p><a name="OpenCMISAPIExamples-ClientBindingAPI"></a></p>
<h2 id="client-binding-api">Client Binding API<a class="headerlink" href="#client-binding-api" title="Permalink">&para;</a></h2>
<p><a href="http://hudson.zones.apache.org/hudson/job/Chemistry%20-%20OpenCMIS%20-%20site/javadoc/org/apache/opencmis/commons/provider/package-summary.html">Client Binding API JavaDoc</a>. See also <a href="client/dev-client-bindings.html">OpenCMIS Client Binding API</a>.</p>
<pre><code> Map&lt;String, String&gt; parameters = new HashMap&lt;String, String&gt;();
 parameters.put(SessionParameter.ATOMPUB_URL, "http://localhost:8080/opencmis/atom");
 parameters.put(SessionParameter.USER, "test");
 parameters.put(SessionParameter.PASSWORD, "test");

 // create binding
 CmisBinding binding = CmisBindingFactory.newInstance().createCmisAtomPubBinding(parameters);

 String repositoryId = "A1";

 // get repository info
 RepositoryInfo repInfo = binding.getRepositoryService().getRepositoryInfo(repositoryId, null);
 System.out.println("Repository name: " + repInfo.getName());

 // get root folder and its path
 ObjectData rootFolder = binding.getObjectService().getObject(repositoryId,
     repInfo.getRootFolderId(), "*", true, IncludeRelationships.NONE, null, false, false, null);

 PropertyString pathProperty = (PropertyString)
 rootFolder.getProperties().getProperties().get(PropertyIds.PATH);
 String path = pathProperty.getFirstValue();
 System.out.println("Root folder path: " + path);

 // list root folder children
 ObjectInFolderList childrenList = binding.getNavigationService().getChildren(repositoryId, repInfo.getRootFolderId(), "*", null, true,
     IncludeRelationships.NONE, null, false, BigInteger.valueOf(10000), BigInteger.ZERO, null);

 for (ObjectInFolderData object : childrenList.getObjects()) {
     System.out.println("---------------------------------");

     PropertyString nameProperty = (PropertyString) object.getObject().getProperties().getProperties().get(PropertyIds.NAME);
     PropertyString blaProperty = (PropertyString) object.getObject().getProperties().getProperties().get("bla");
     PropertyId typeProperty = (PropertyId) object.getObject().getProperties().getProperties().get(PropertyIds.OBJECT_TYPE_ID);

     System.out.println("  Id:	           " + object.getObject().getId());
     System.out.println("  Name:             " + nameProperty.getFirstValue());
     System.out.println("  Base Type:        " + object.getObject().getBaseTypeId());
     System.out.println("  Property 'bla':   " + (blaProperty == null ? null : blaProperty.getFirstValue()));

     TypeDefinition type = binding.getRepositoryService().getTypeDefinition(repositoryId, typeProperty.getFirstValue(), null);
     System.out.println("  Type Id:          " + type.getId());
     System.out.println("  Type Name:        " + type.getDisplayName());
     System.out.println("  Type Query Name:  " + type.getQueryName());

     AllowableActions actions = object.getObject().getAllowableActions();
     System.out.println("  canGetProperties: " + actions.getAllowableActions().contains(Action.CAN_GET_PROPERTIES));
     System.out.println("  canDeleteObject:  " + actions.getAllowableActions().contains(Action.CAN_DELETE_OBJECT));
 }

 // get an object
 String objectId = "100";

 ObjectData object = binding.getObjectService().getObject(repositoryId, objectId, "*", false,
     IncludeRelationships.NONE, null, false, false, null);

  if (object.getBaseTypeId() == BaseTypeId.CMIS_FOLDER) {
      System.out.println("Is root folder: " + (repInfo.getRootFolderId().equals(object.getId())));
  }

  if (object.getBaseTypeId() == BaseTypeId.CMIS_DOCUMENT) {
      ContentStream content = binding.getObjectService().getContentStream(repositoryId, objectId, null, null, null, null);
      System.out.println("Document MIME type: " + content.getMimeType());
 }
</code></pre>

</div>
             <!-- Content -->
           </td>
          </tr>
        </table>
     </td>
     <td id="cell-2-2">&nbsp;</td>
    </tr>
    <tr width="100%">
      <td id="cell-3-0">&nbsp;</td>
      <td id="cell-3-1">&nbsp;</td>
      <td id="cell-3-2">&nbsp;</td>
    </tr>
    <tr width="100%">
     <td id="cell-3-0">&nbsp;</td>
     <td id="cell-3-1">
       <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
          Apache Chemistry, Apache, the Apache feather logo, and the Apache 
          Chemistry project logo are trademarks of The Apache Software 
          Foundation.
          <br>
          Content Management Interoperability Services (CMIS) is an
          <a href="https://www.oasis-open.org/committees/cmis/">OASIS</a>
          specification.
       </div>
       <!-- Footer -->
       </div>
     </td>
     <td id="cell-3-2">&nbsp;</td>
    </tr>
    <tr width="100%">
      <td id="cell-4-0">&nbsp;</td>
      <td id="cell-4-1">&nbsp;</td>
      <td id="cell-4-2">&nbsp;</td>
    </tr>
  </table>
  <script type="text/javascript" src="/resources/retina.min.js"></script>
  <link rel="stylesheet" href="/resources/xcode.css">
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.0.1/build/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</body>
</html>